-- MySQL Script generated by MySQL Workbench
-- Tue Oct 29 14:31:21 2024
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema SUMZONE
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema SUMZONE
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `SUMZONE` DEFAULT CHARACTER SET utf8 ;
USE `SUMZONE` ;

-- -----------------------------------------------------
-- Table `SUMZONE`.`INSCRIPCION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SUMZONE`.`INSCRIPCION` (
  `fecha_inscripcion` DATETIME NULL,
  `ID_inscripcion` INT NOT NULL,
  PRIMARY KEY (`ID_inscripcion`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SUMZONE`.`USUARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SUMZONE`.`USUARIO` (
  `username` VARCHAR(50) NOT NULL,
  `Email` VARCHAR(50) NOT NULL,
  `Contrase√±a` VARCHAR(50) NOT NULL,
  `PERSONA_ID` INT NOT NULL AUTO_INCREMENT,
  `INSCRIPCION_ID_inscripcion` INT NOT NULL,
  PRIMARY KEY (`PERSONA_ID`),
  INDEX `fk_USUARIO_INSCRIPCION1_idx` (`INSCRIPCION_ID_inscripcion` ASC),
  CONSTRAINT `fk_USUARIO_INSCRIPCION1`
    FOREIGN KEY (`INSCRIPCION_ID_inscripcion`)
    REFERENCES `SUMZONE`.`INSCRIPCION` (`ID_inscripcion`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SUMZONE`.`EVENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SUMZONE`.`EVENTO` (
  `ID eventos` INT NOT NULL AUTO_INCREMENT,
  `Fecha_inicio` DATE NOT NULL,
  `fecha_fin` DATE NOT NULL,
  `frecuencia` VARCHAR(15) NOT NULL,
  `horario` DATETIME NOT NULL,
  `Descripcion` VARCHAR(300) NULL,
  `USUARIO_PERSONA_ID` INT NOT NULL,
  `tipo_evento` BINARY NOT NULL,
  PRIMARY KEY (`ID eventos`),
  INDEX `fk_EVENTO_USUARIO1_idx` (`USUARIO_PERSONA_ID` ASC),
  CONSTRAINT `fk_EVENTO_USUARIO1`
    FOREIGN KEY (`USUARIO_PERSONA_ID`)
    REFERENCES `SUMZONE`.`USUARIO` (`PERSONA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SUMZONE`.`ROL`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SUMZONE`.`ROL` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `descripcion_rol` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SUMZONE`.`USUARIO_has_ROL`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SUMZONE`.`USUARIO_has_ROL` (
  `USUARIO_PERSONA_ID` INT NOT NULL,
  `ROL_ID` INT NOT NULL,
  `inscripcion` VARCHAR(60) NOT NULL,
  PRIMARY KEY (`USUARIO_PERSONA_ID`, `ROL_ID`),
  INDEX `fk_USUARIO_has_ROL_ROL1_idx` (`ROL_ID` ASC),
  INDEX `fk_USUARIO_has_ROL_USUARIO1_idx` (`USUARIO_PERSONA_ID` ASC),
  CONSTRAINT `fk_USUARIO_has_ROL_USUARIO1`
    FOREIGN KEY (`USUARIO_PERSONA_ID`)
    REFERENCES `SUMZONE`.`USUARIO` (`PERSONA_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_USUARIO_has_ROL_ROL1`
    FOREIGN KEY (`ROL_ID`)
    REFERENCES `SUMZONE`.`ROL` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SUMZONE`.`EVENTO_has_INSCRIPCION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SUMZONE`.`EVENTO_has_INSCRIPCION` (
  `EVENTO_ID eventos` INT NOT NULL,
  `INSCRIPCION_ID_inscripcion` INT NOT NULL,
  PRIMARY KEY (`EVENTO_ID eventos`, `INSCRIPCION_ID_inscripcion`),
  INDEX `fk_EVENTO_has_INSCRIPCION_INSCRIPCION1_idx` (`INSCRIPCION_ID_inscripcion` ASC),
  INDEX `fk_EVENTO_has_INSCRIPCION_EVENTO1_idx` (`EVENTO_ID eventos` ASC),
  CONSTRAINT `fk_EVENTO_has_INSCRIPCION_EVENTO1`
    FOREIGN KEY (`EVENTO_ID eventos`)
    REFERENCES `SUMZONE`.`EVENTO` (`ID eventos`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_EVENTO_has_INSCRIPCION_INSCRIPCION1`
    FOREIGN KEY (`INSCRIPCION_ID_inscripcion`)
    REFERENCES `SUMZONE`.`INSCRIPCION` (`ID_inscripcion`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
